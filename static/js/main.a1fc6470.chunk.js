(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},16:function(e,t,a){"use strict";a.r(t);var o=a(1),n=a.n(o),s=a(9),r=a.n(s),c=a(2),i=a(3),d=a(5),p=a(4),l=a(6),u=a(0),h=(a(7),"e283ab-116cce-335947-182e40-ca5f59"),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).check=function(e){var t=Object(u.a)(Object(u.a)(a)),o=a.props.id,n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===this.readyState&&200===this.status){if(!1===JSON.parse(this.responseText).completed){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===this.readyState&&200===this.status?(t.setState({done:!0}),t.props.componentDidMount()):4===this.readyState&&console.log(this.responseText)};var a="https://cse204.work/todos/".concat(o);e.open("PUT",a,!0),e.setRequestHeader("x-api-key",h),e.setRequestHeader("Content-type","application/json"),e.send(JSON.stringify({completed:!0}))}}else 4===this.readyState&&console.log(this.responseText)};var s="https://cse204.work/todos/".concat(o);n.open("GET",s,!0),n.setRequestHeader("Content-type","application/json"),n.setRequestHeader("x-api-key",h),n.send()},a.delete=function(e){var t=Object(u.a)(Object(u.a)(a)),o=new XMLHttpRequest,n=a.props.id;o.onreadystatechange=function(){4===this.readyState&&200===this.status?(t.setState({deleted:!0}),t.props.deleteFromArray(t.props.id)):4===this.readyState&&console.log(this.responseText)};var s="https://cse204.work/todos/".concat(n);o.open("DELETE",s,!0),o.setRequestHeader("x-api-key",h),o.send()},a.state={done:a.props.done,deleted:a.props.deleted},a.check=a.check.bind(Object(u.a)(Object(u.a)(a))),a.delete=a.delete.bind(Object(u.a)(Object(u.a)(a))),a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e="";return e=!0===this.props.done?"strike":"nostrike",n.a.createElement("div",{id:this.props.id,className:e},n.a.createElement("p",{id:"itemtext",className:"itemtext"},this.props.todo_text),n.a.createElement("button",{className:"delete",onClick:this.delete},"Delete"),n.a.createElement("button",{className:"check",onClick:this.check},"Check"))}}]),t}(o.Component),m=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{id:"additem"},n.a.createElement("form",{id:"addform"},n.a.createElement("input",{type:"text",class:"additemform",id:this.props.id,placeholder:"Add an item!",value:this.props.todo_text,onChange:this.props.onChange}),n.a.createElement("button",{id:"additembutton",type:"submit",onClick:this.props.add},"Add")))}}]),t}(o.Component),O="e283ab-116cce-335947-182e40-ca5f59",f=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).sort=function(e){var t=a.state.todos.sort(function(e,t){return e.completed-t.completed});a.setState({todos:t})},a.add=function(e){e.preventDefault();var t=Object(u.a)(Object(u.a)(a)),o=t.state.todo_text;if(""!==o){var n={text:o},s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===this.readyState&&200===this.status){console.log("test1");var e=t.state.todos;e.push(JSON.parse(this.responseText)),t.setState({todos:e})}else 4===this.readyState&&(console.log("we here?"),console.log(this.responseText));t.setState({todo_text:""})},s.open("POST","https://cse204.work/todos",!0),s.setRequestHeader("Content-type","application/json"),s.setRequestHeader("x-api-key",O),s.send(JSON.stringify(n))}},a.onChange=function(e){Object(u.a)(Object(u.a)(a)).setState({todo_text:e.target.value})},a.componentDidMount=function(){var e=new XMLHttpRequest,t=Object(u.a)(Object(u.a)(a));e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText);t.setState({todos:e})}},e.open("GET","https://cse204.work/todos",!0),e.setRequestHeader("x-api-key",O),e.send()},a.deleteFromArray=function(e){var t=Object(u.a)(Object(u.a)(a)),o=t.state.todos.filter(function(t){if(t.id!==e)return t});t.setState({todos:o})},a.state={todos:[],todo_text:""},a.add=a.add.bind(Object(u.a)(Object(u.a)(a))),a.onChange=a.onChange.bind(Object(u.a)(Object(u.a)(a))),a.deleteFromArray=a.deleteFromArray.bind(Object(u.a)(Object(u.a)(a))),a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("section",{id:"myTodos"},n.a.createElement("h1",null,"My ToDo List!"),n.a.createElement("div",{id:"list"},this.state.todos.map(function(t){return n.a.createElement(b,{key:t.id,todo_text:t.text,id:t.id,done:t.completed,deleteFromArray:e.deleteFromArray,componentDidMount:e.componentDidMount}," ")})),n.a.createElement(m,{add:this.add,todo_text:this.state.todo_text,onChange:this.onChange}),n.a.createElement("button",{className:"sort",onClick:this.sort},"Sort"))}}]),t}(o.Component);r.a.render(n.a.createElement(f,null),document.getElementById("root"))},7:function(e,t,a){}},[[10,2,1]]]);
//# sourceMappingURL=main.a1fc6470.chunk.js.map